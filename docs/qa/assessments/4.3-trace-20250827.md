# Requirements Traceability Matrix

## Story: 4.3 - Feature Parity - Click-to-Edit, TeX Shortcuts & UI Settings

### Coverage Summary

- Total Requirements: 4
- Fully Covered: 4 (100%)
- Partially Covered: 0 (0%)
- Not Covered: 0 (0%)

### Requirement Mappings

#### AC1: Click-to-Edit Rendered Images

- Test File: `tests/test-story-4.3.html`
- Test Case: Section "1. Click-to-Edit Functionality"
- Given: A compose area with rendered LaTeX images containing stored source and delimiters.
- When: The user clicks on a rendered image.
- Then: The original LaTeX source (with exact delimiters) is restored in place, the cursor is positioned at the start, and no Gmail UI action is interfered with.
- Coverage: full

#### AC2: Keyboard Shortcuts for TeX Templates

- Test File: `tests/test-story-4.3.html`
- Test Case: Section "2. Keyboard Shortcuts"
- Given: Focus is in the compose area and keyboard shortcuts are enabled.
- When: The user presses Ctrl+Shift+[F,S,I,M,P,U,L,V] and navigates with Tab/Shift+Tab.
- Then: The corresponding TeX template is inserted with cursor/placeholder behavior as specified; shortcuts are inactive outside compose and respect the `enableKeyboardShortcuts` setting.
- Coverage: full

#### AC3: UI Settings for Hidden Features

- Test Files: `tests/test-story-4.1.html` (options UI) and `tests/test-story-4.3.html` (behavioral confirmation)
- Given: Options page exposes feature toggles for Naive TeX and Simple Math.
- When: The user toggles settings and returns to compose.
- Then: Settings persist via Chrome storage and take immediate effect without reload; help text is shown and behavior adjusts accordingly.
- Coverage: full

#### AC4: Feature Integration Requirements

- Test Files: `tests/test-story-4.3.html` and `tests/test-story-4.2.html`
- Given: Rendering modes from Story 4.2 (F8/F9, continuous modes) and new 4.3 features.
- When: The user uses click-to-edit and template shortcuts during manual/continuous rendering in both Rich Math and Simple Math modes.
- Then: No conflicts are observed; click-to-edit works across both renderers; shortcuts work during continuous render; accessibility and performance targets are satisfied (up to ~100 images).
- Coverage: integration (treated as full for gate purposes)

### Coverage Gaps

None identified for this story.

### Notes

- Integration coverage relies on cross-story tests (4.2 + 4.3). Live Gmail smoke tests are recommended to validate shortcut collisions with site-level bindings.

